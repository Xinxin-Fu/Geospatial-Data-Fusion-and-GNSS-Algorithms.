# GNSS（Global Navigation Satellite System）

GNSS（Global Navigation Satellite System）是利用卫星提供定位、导航和授时（PNT）服务的系统。目前全球主流 GNSS 包括美国的 GPS、中国的北斗（BDS）、俄罗斯的 GLONASS 和欧洲的 Galileo。由于 GPS 的广泛应用，下面的组成和原理以 GPS 为例基础进行介绍。

---

## 什么是系统？什么是 GNSS 系统？

系统是指由若干相互关联、相互作用的组成部分，按照一定的结构和功能有机组合在一起，用于实现某种特定目的的整体。  
所谓 GPS 系统：主要由**空间段、地面段和用户段**组成，每个部分都有独立的任务，但相互配合实现整个 GNSS 的定位、导航与授时功能。

---

## 根据卫星位置计算接收机位置

在三维空间中，每一个点的位置都可以用三个坐标值表示，即 $(x, y, z)$，所谓“定位”，本质上就是求解接收机在地心坐标系中的三维坐标值。假设每颗卫星的位置是已知的。根据测距原理，接收机与第 $i$ 颗卫星之间的距离（严格来说是“伪距”）可以表示为：

\[
\rho_i = \sqrt{(x - x_i)^2 + (y - y_i)^2 + (z - z_i)^2}
\]

其中 $(x_i, y_i, z_i)$ 是第 $i$ 颗卫星的位置，$\rho_i$ 是接收机与该卫星之间的“距离”。这一距离通过测量电磁信号传播的时间差来估算接收机到卫星的距离，即：

\[
\rho_i = c \cdot (T_\text{recv} - T_\text{trans})
\]

上式中：卫星在广播信号时，会发送一个极为精确的时间戳 $T_\text{trans}$；接收机记录下信号到达的本地时间 $T_\text{recv}$。但问题在于——接收机时钟通常并不精确，存在一个时间误差 $\delta t$：

\[
\rho_i = c \cdot \left( T_\text{recv} - T_\text{trans} + \delta t \right)
\]

这样，我们就有了四个未知数：$x, y, z$ 和 $\delta t$。每颗卫星提供一个这样的方程，要解这四个未知数，至少需要四个独立的方程，也就需要至少接收来自四颗卫星的信号。这就是为什么在 GNSS 中，最少需要四颗卫星才能完成一次有效的三维定位的根本原因。

---

## 卫星位置的获取及地面控制段

在了解如何利用已知的卫星位置和伪距计算出我们自身的位置后，就引出了一个新的问题：卫星自身的位置如何得知？是谁在维持这些“已知信息”的准确性？  

这就涉及到为何会有 GPS 系统的**地面部分（地面控制段）**。地面控制部分承担着“为整个系统提供参考基准与精度保障”的核心任务。以 GPS 系统为例，其地面部分包括：

- **监测站**：分布在全球的地面接收器，持续接收所有 GPS 卫星的信号，并测量其运行轨道和钟差等参数。
- **主控站**：位于美国科罗拉多州，用于收集各监测站数据，计算每颗卫星的轨道参数（星历）与时钟改正数。
- **上行站**：将主控站计算的轨道信息上传给卫星，使卫星在广播信号时，能够携带最新、最准确的轨道与时间信息。

这就意味着，当接收机接收到卫星信号时，信号中所包含的卫星位置（星历）和时间信息，实际上来自地面控制系统的持续维护与更新。

---

## GPS 系统组成及协同工作

GPS 系统主要由三大部分组成：**空间段、地面段和用户段**，三者协同工作如下：

1. **空间段**：由多颗卫星组成，持续向地面广播包含时间戳和导航电文的信号。
2. **地面段**：通过全球布设的监测站接收卫星信号，反算卫星精确轨道与钟差信息，并将修正后的导航数据上传至卫星。
3. **用户段**：接收来自多颗可见卫星的信号，提取其中的轨道与时间信息，并结合伪距测量，解算出接收机在三维空间中的位置。

---

## 补充说明

1. **接收机为何不能获得准确时间？**  
   手机中通常使用低成本石英晶振，其时间误差可达毫秒级。光速约 $c = 3 \times 10^8 \ \mathrm{m/s}$，1 毫秒误差会导致定位误差高达 300 km。因此在 GNSS 定位解算中，并不假设接收机时间是准确的，而是将“接收机时钟偏差”作为第四个未知数，与位置 $(x, y, z)$ 一起解算。

2. **卫星是否持续发射信号？**  
   在 GPS 系统中，卫星持续广播信号，其中包含高精度时间信息和轨道参数；用户接收机被动接收信号即可完成定位。北斗系统早期支持双向通信功能，用户终端可通过卫星回传位置信息，实现“短报文通信”。

3. **解方程过程**  
   GNSS 伪距方程是一组非线性方程，含有多个未知量及观测误差，无法直接代数求解。常用方法是**非线性最小二乘法**（Least Squares, LS），其基本思想是最小化测量值与理论模型之间的误差平方和：

\[
\min \sum_i \left( \rho_i^\text{obs} - \rho_i^\text{calc} \right)^2
\]

迭代算法常用牛顿迭代法（Newton-Raphson）或其简化形式**高斯-牛顿（Gauss-Newton）法**，利用雅可比矩阵逼近二阶导数，逐步更新接收机位置估计。
