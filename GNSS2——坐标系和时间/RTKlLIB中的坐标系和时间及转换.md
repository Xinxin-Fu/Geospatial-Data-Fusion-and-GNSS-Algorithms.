# GNSS 常用坐标与时间转换

在 GNSS 定位和导航中，掌握常用坐标和时间系统的转换方法是必备技能，方便多系统融合、数据处理和定位结果展示。

---

## 1. 空间坐标转换

GNSS 中常用的空间坐标转换主要涉及全球坐标系与地方坐标系之间的转换，以及椭球与地心直角坐标的互换。

### 1.1 WGS84 经纬度 ↔ ECEF（XYZ）
- **概念**：将地理坐标（经纬度 + 高程）与地心地固坐标系（ECEF XYZ）互相转换。  
- **方法**：
  - 从经纬度到 ECEF：
    \[
    \begin{aligned}
    X &= (N+h)\cos\phi \cos\lambda \\
    Y &= (N+h)\cos\phi \sin\lambda \\
    Z &= (N(1-e^2)+h)\sin\phi
    \end{aligned}
    \]
    其中 \(N = a/\sqrt{1-e^2 \sin^2\phi}\)，a 为椭球长半轴，e 为偏心率，h 为高程。
  - 从 ECEF 到经纬度：迭代或闭式公式解算 \(\phi, \lambda, h\)。
- **使用场景**：卫星定位解算、地图显示、GIS 应用。

### 1.2 ECEF ↔ ENU / NED
- **概念**：将全球坐标（ECEF）转换到接收机为原点的局部坐标系。  
- **方法**：  
  - 以接收机位置 \( (X_0,Y_0,Z_0) \) 为原点  
  - 构建旋转矩阵，将 ECEF 坐标投影到东-北-天（ENU）或北-东-下（NED）坐标
- **使用场景**：局部导航、无人机航迹规划、车辆定位。

### 1.3 地心惯性坐标系 ECI ↔ ECEF
- **概念**：将卫星在空间的运动轨迹（ECI）转换到地球固定坐标系（ECEF）。  
- **方法**：  
  - 根据格林尼治恒星时（GST）旋转角，将 ECI 坐标绕地轴旋转到 ECEF
- **使用场景**：卫星轨道计算、卫星姿态分析、精密定位。

---

## 2. 时间系统转换

GNSS 时间系统的转换主要用于同步不同系统和显示校准。

### 2.1 GPS 时间 ↔ UTC
- **概念**：GPS 时间（GPST）连续计时，不随闰秒调整；UTC 会加入闰秒。  
- **方法**：
  \[
  UTC = GPST - \Delta t_{ls}
  \]
  其中 \(\Delta t_{ls}\) 为 GPS 与 UTC 间的累积闰秒差。
- **使用场景**：定位结果显示、时间同步、与其他系统对接。

### 2.2 北斗时间 BDT ↔ UTC
- **概念**：BDT 自 2006 年起连续计时，不随闰秒调整。  
- **方法**：与 UTC 的差值随卫星广播更新，可查表获得。
- **使用场景**：北斗定位显示校准和多系统融合。

### 2.3 GPS 时间 ↔ 北斗时间 / Galileo 时间
- **概念**：不同 GNSS 系统使用各自时间。  
- **方法**：通过系统间时间偏差（常由广播星历或接收机软件提供）进行换算。
- **使用场景**：多系统联合定位（GNSS PPP 或 RTK）。

---

### 3. 小结

- **空间坐标转换**：
  - WGS84 ↔ ECEF：全球定位与地图显示  
  - ECEF ↔ ENU/NED：局部导航与测量  
  - ECI ↔ ECEF：卫星轨道计算  
- **时间转换**：
  - GPST ↔ UTC：显示和同步  
  - BDT ↔ UTC / GPST ↔ BDT：多系统融合  

> 掌握这些转换方法，是实现精确定位、导航和多系统协同的关键。

