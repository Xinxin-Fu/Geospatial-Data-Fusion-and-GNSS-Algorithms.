## 3. 常用空间坐标转换

GNSS 坐标转换主要涉及全球坐标系与地方坐标系之间的互换，以及椭球与地心直角坐标的转换。

### 3.1 WGS84 ↔ ECEF（XYZ）

- **从经纬度到 ECEF**：

$$
\begin{aligned}
X &= (N + h) \cos \phi \cos \lambda \\
Y &= (N + h) \cos \phi \sin \lambda \\
Z &= \big(N (1 - e^2) + h\big) \sin \phi
\end{aligned}
$$

其中：
- $\phi$ 是纬度，$\lambda$ 是经度，$h$ 是椭球高程  
- $a$ 是椭球长半轴，$e$ 是偏心率  
- $N$ 为卯酉圈半径：
$$
N = \frac{a}{\sqrt{1 - e^2 \sin^2 \phi}}
$$

- **从 ECEF 到经纬度**：使用迭代或闭式公式求解 $\phi, \lambda, h$  
- **使用场景**：卫星定位解算、地图显示、GIS 应用

### 3.2 ECEF ↔ ENU / NED

- **概念**：将全球坐标（ECEF）转换到接收机为原点的局部坐标系。  
- **方法**：构建旋转矩阵，将 ECEF 坐标投影到东-北-天（ENU）或北-东-下（NED）方向。  
- **使用场景**：局部导航、无人机航迹规划、车辆定位

### 3.3 ECI ↔ ECEF

- **概念**：将卫星在空间的运动轨迹（ECI）转换到地球固定坐标系（ECEF）。  
- **方法**：根据格林尼治恒星时（GST）旋转角，将 ECI 坐标绕地轴旋转到 ECEF。  
- **使用场景**：卫星轨道计算、卫星姿态分析、精密定位

---

## 4. 常用时间系统转换

### 4.1 GPS 时间 ↔ UTC

- **方法**：
$$
UTC = GPST - \Delta t_{ls}
$$
其中 $\Delta t_{ls}$ 为 GPS 与 UTC 间的累积闰秒差  
- **使用场景**：定位结果显示、时间同步、与其他系统对接

### 4.2 北斗时间 BDT ↔ UTC

- **方法**：通过广播星历或查表获得 BDT 与 UTC 的差值  
- **使用场景**：北斗定位显示校准，多系统融合

### 4.3 GPS ↔ BDT / Galileo 时间

- **方法**：通过系统间时间偏差换算（接收机或星历提供）  
- **使用场景**：多系统联合定位（PPP 或 RTK）

---

## 5. 小结

- **空间坐标系**：
  - 全球定位：ECEF + WGS84  
  - 局部导航：ENU / NED  
  - 轨道计算：ECI
- **时间系统**：
  - GNSS 解算：GPST / BDT / GST  
  - 显示与校准：UTC




> 掌握这些坐标系、时间系统及常用转换方法，是实现精确定位、导航和多系统协同的关键。
