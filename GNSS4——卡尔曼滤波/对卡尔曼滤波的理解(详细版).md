# 对卡尔曼滤波的简单理解
## 卡尔曼滤波公式的推导过程可以参考《GPS原理与接收机设计谢钢》，这里直接给出公式：
## 1. 预测
$$
\hat{x}_{\bar{k}} = A \hat{x}_{k-1} + B u_{k-1}
$$

$$
P_{\bar{k}} = A P_{k-1} A^T + Q
$$

## 2. 校正
$$
K_{k} = P_{\bar{k}}  C^T (C P_{\bar{k}} C^T + R)^{-1}
$$

$$
\hat{x}_{k} = \hat{x}_{\bar{k}} + K_{k} (y_k - C\hat{x}_{\bar{k}})
$$

$$
P_{k} = (I-K_{k} C) P_{\bar{k}}
$$


## 前面已经讲解了卡尔曼滤波的核心在于“预测+观测”从而得到比原来更为精准的值, 这里产生的问题是，应该更依赖哪一个数据?
## 这里用来平衡两者的关系也就是所谓卡尔曼滤波增益 $$K_{k}$$

$$
K_{k} = P_{\bar{k}}  C^T (C P_{\bar{k}} C^T + R)^{-1}
$$

通过该公式可以很容易看出，Kerman滤波增益主要依赖于 $$P_{\bar{k}}$$（状态均方误差阵）(C和R可以认为为常系数阵)；
 $$P_{\bar{k}}$$ 反映的是估计值（预测值）和真值之间的差异，换而言之，当该差异越大的时候，意味着预测结果不可靠，更应该依赖于观测值。

 ## 这里进一步对 $$P_{\bar{k}}$$进行梳理

$$
P_{\bar{k}} = A P_{k-1} A^T + Q
$$

卡尔曼滤波把 上一次状态估计的不确定性（误差协方差） 当作当前预测的不确定性参考。换句话说，它认为上一时刻状态的误差会“传递”到下一时刻，加上系统本身的随机扰动（过程噪声），就得到当前预测的不确定性。
通俗的讲解就是上一次测量有 ±2 米的不确定性，你预测下一秒位置时就会把这 ±2 米带入参考，同时考虑路况、风、加速度变化等新的不确定性，得到下一秒的总误差估计。

